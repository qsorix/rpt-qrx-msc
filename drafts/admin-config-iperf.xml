<configuration>
  <hosts>
    <host id="A">
      <name>localhost</name> <!-- rozwiazac nazwy albo na razie dac na sztywno IP -->
      <port>6666</port> <!-- przyda sie, jakbysmy chcieli cos pokazywac, to beda forwardy na studnie -->
    </host>

    <host id="B">
      <name>localhost</name>
      <port>6667</port>
    </host>
  </hosts>

  <test>
    <duration unit="s">30</duration>

    <!-- z tego zrobic schedule do wykonania pomiaru -->
    <schedule id="iperf-server">
      <action id="iperf">
        <at unit="s">0</at>
        <command>iperf -u -s </command>
      </action>
      <action>
        <at unit="s">25</at>
        <kill id="iperf"/>
      </action>
    </schedule>

    <!-- z tego zrobic schedule do wykonania pomiaru -->
    <schedule id="iperf-client">
      <action id="iperf">
        <at unit="s">0</at>
        <!-- IP hosta A... podmienic jakkolwiek. moze byc po prostu na stale podane IP ;-) -->
        <command>iperf -u -c localhost -t 28</command>
      </action>
      <action>
        <at unit="s">25</at>
        <kill id="iperf"/>
      </action>
    </schedule>

    <!-- a to jest schedule do pobrania wynikow. czas nie jest podany wiec niech sie wykonuja jedna za drugÄ… -->
    <schedule id="result-generic">
      <action><command>uname -a</command></action>
      <action><command>date</command></action>
      <action><command>iperf -v</command></action>
    </schedule>

    <setup host="A">
      <schedule id="iperf-server"/>
      <results id="result-generic"/>
    </setup>

    <setup host="B">
      <schedule id="iperf-client"/>
      <results id="result-generic"/>
    </setup>
  </test>
</configuration>
